{% extends 'base.html' %}
{% block style %}
<style>
    @keyframes spinner-rotate {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }

    .spinner {
        animation: spinner-rotate 1.2s linear infinite;
    }
</style>
{% endblock%}
{% block content %}
<section class="container mx-auto px-6 py-8 relative">

    <div id="book-loading-spinner"
        class="absolute inset-0 z-50 flex items-center justify-center bg-white bg-opacity-85">
        <div class="flex flex-col items-center">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 496" width="48" height="48" class="spinner">
                class="mb-4 spinner">
                <path style="fill:#76BFFF"
                    d="M248 92c-13.6 0-24-10.4-24-24V24c0-13.6 10.4-24 24-24s24 10.4 24 24v44c0 12.8-10.4 24-24 24" />
                <path style="fill:#0A4ABF"
                    d="M248 496c-13.6 0-24-10.4-24-24v-44c0-13.6 10.4-24 24-24s24 10.4 24 24v44c0 13.6-10.4 24-24 24" />
                <path style="fill:#B3D9FF"
                    d="M157.6 116c-8 0-16-4-20.8-12l-21.6-37.6c-6.4-11.2-2.4-26.4 8.8-32.8s26.4-2.4 32.8 8.8L178.4 80c6.4 11.2 2.4 26.4-8.8 32.8-3.2 1.6-8 3.2-12 3.2" />
                <path style="fill:#1B6ED1"
                    d="M360 465.6c-8 0-16-4-20.8-12L317.6 416c-6.4-11.2-2.4-26.4 8.8-32.8s26.4-2.4 32.8 8.8l21.6 37.6c6.4 11.2 2.4 26.4-8.8 32.8-4 2.4-8 3.2-12 3.2" />
                <path style="fill:#E6F3FF"
                    d="M92 181.6c-4 0-8-.8-12-3.2l-37.6-21.6c-11.2-6.4-15.2-21.6-8.8-32.8s21.6-15.2 32.8-8.8l37.6 21.6c11.2 6.4 15.2 21.6 8.8 32.8-4.8 8-12.8 12-20.8 12" />
                <path style="fill:#2580D6"
                    d="M442.4 384c-4 0-8-.8-12-3.2L392 359.2c-11.2-6.4-15.2-21.6-8.8-32.8s21.6-15.2 32.8-8.8l37.6 21.6c11.2 6.4 15.2 21.6 8.8 32.8-4 8-12 12-20 12" />
                <path style="fill:#F0F8FF"
                    d="M68 272H24c-13.6 0-24-10.4-24-24s10.4-24 24-24h44c13.6 0 24 10.4 24 24s-11.2 24-24 24" />
                <path style="fill:#3B94F2"
                    d="M472 272h-44c-13.6 0-24-10.4-24-24s10.4-24 24-24h44c13.6 0 24 10.4 24 24s-10.4 24-24 24" />
                <path style="fill:#0F5DBA"
                    d="M53.6 384c-8 0-16-4-20.8-12-6.4-11.2-2.4-26.4 8.8-32.8l37.6-21.6c11.2-6.4 26.4-2.4 32.8 8.8s2.4 26.4-8.8 32.8l-37.6 21.6c-3.2 2.4-7.2 3.2-12 3.2" />
                <path style="fill:#55AEF7"
                    d="M404 181.6c-8 0-16-4-20.8-12-6.4-11.2-2.4-26.4 8.8-32.8l37.6-21.6c11.2-6.4 26.4-2.4 32.8 8.8s2.4 26.4-8.8 32.8L416 178.4c-4 2.4-8 3.2-12 3.2" />
                <path style="fill:#0B51C5"
                    d="M136 465.6c-4 0-8-.8-12-3.2-11.2-6.4-15.2-21.6-8.8-32.8l21.6-37.6c6.4-11.2 21.6-15.2 32.8-8.8s15.2 21.6 8.8 32.8l-21.6 37.6c-4.8 8-12.8 12-20.8 12" />
                <path style="fill:#57C4FF"
                    d="M338.4 116c-4 0-8-.8-12-3.2-11.2-6.4-15.2-21.6-8.8-32.8l21.6-37.6c6.4-11.2 21.6-15.2 32.8-8.8s15.2 21.6 8.8 32.8L359.2 104c-4.8 7.2-12.8 12-20.8 12" />
            </svg>
        </div>
    </div>

    <h2 class="text-2xl font-bold mb-6">My Borrowed Books</h2>
    <div class="overflow-x-auto rounded-lg shadow bg-white">
        <table class="min-w-full divide-y divide-gray-200" id="mybooks-table">
            <thead class="bg-gray-50">
                <tr>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> </th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ISBN</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Author</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Publisher</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Return</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Approved By</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Fine</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Action</th>
                </tr>
            </thead>
            <tbody id="mybooks-list">
                <!-- Borrowed books will be rendered here -->
            </tbody>
        </table>
    </div>
    <div id="borrow-return" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50 hidden">
        <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative">
            <button id="close-return-modal" class="absolute top-2 right-2 text-gray-400 hover:text-gray-700">&times;</button>
            <h3 class="text-lg font-semibold mb-4">Return Book</h3>
            <form id="borrow-return-form" class="space-y-4">
                <input type="hidden" id="return-book-id">
                <div>
                    <label for="return_description" class="block text-sm font-medium text-gray-700 mb-1">Return Condition / Description</label>
                    <textarea id="return_description" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg text-sm" placeholder="Describe the condition or reason for returning this book" required></textarea>
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700">Submit Return</button>
            </form>
        </div>
    </div>
</section>
{% endblock %}
{% block scripts %}
<script src="/static/books/mybooks.js"></script>
{% endblock %}